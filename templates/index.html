<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ë°ÄÊüìÈíüÊ•º - ËØ¥‰π¶‰∫∫Á≥ªÁªü</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Noto+Serif+SC:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <canvas id="bg-canvas"></canvas>
    <div class="app-container">
        <!-- È°∂ÈÉ®ÂØºËà™ -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">ü©∏</span>
                    <h1>Ë°ÄÊüìÈíüÊ•º</h1>
                    <span class="subtitle">ËØ¥‰π¶‰∫∫Á≥ªÁªü</span>
                </div>
                <div class="game-info" id="gameInfo" style="display: none;">
                    <span class="script-name" id="currentScript"></span>
                    <span class="phase-indicator" id="phaseIndicator"></span>
                </div>
            </div>
        </header>

        <!-- ‰∏ªÂÜÖÂÆπÂå∫Âüü -->
        <main class="main-content">
            <!-- ËÆæÁΩÆÈù¢Êùø -->
            <section id="setupPanel" class="panel setup-panel">
                <div class="panel-header">
                    <h2>Ê∏∏ÊàèËÆæÁΩÆ</h2>
                </div>
                <div class="panel-body">
                    <!-- ÂâßÊú¨ÈÄâÊã© -->
                    <div class="setup-section">
                        <h3>ÈÄâÊã©ÂâßÊú¨</h3>
                        <div class="script-grid" id="scriptGrid">
                            <!-- ÂâßÊú¨Âç°ÁâáÂ∞ÜÁî±JavaScriptÁîüÊàê -->
                        </div>
                    </div>

                    <!-- Áé©ÂÆ∂Êï∞Èáè -->
                    <div class="setup-section">
                        <h3>ÂèÇ‰∏é‰∫∫Êï∞</h3>
                        <div class="player-count-wrapper">
                            <input type="range" id="playerCount" min="5" max="15" value="8" class="player-slider">
                            <div class="player-count-display">
                                <span id="playerCountValue">8</span> ÂêçÁé©ÂÆ∂
                            </div>
                        </div>
                        <div class="role-distribution" id="roleDistribution">
                            <!-- ËßíËâ≤ÂàÜÂ∏ÉÂ∞ÜÁî±JavaScriptÁîüÊàê -->
                        </div>
                    </div>

                    <!-- Áé©ÂÆ∂‰ø°ÊÅØËæìÂÖ• -->
                    <div class="setup-section">
                        <h3>Áé©ÂÆ∂‰ø°ÊÅØ</h3>
                        <div class="player-input-grid" id="playerInputGrid">
                            <!-- Áé©ÂÆ∂ËæìÂÖ•Ê°ÜÂ∞ÜÁî±JavaScriptÁîüÊàê -->
                        </div>
                    </div>

                    <!-- ËßíËâ≤ÂàÜÈÖçÊñπÂºè -->
                    <div class="setup-section">
                        <h3>ËßíËâ≤ÂàÜÈÖç</h3>
                        <div class="assignment-options">
                            <button class="btn btn-primary" id="randomAssignBtn">
                                <span class="btn-icon">üé≤</span>
                                ÈöèÊú∫ÂàÜÈÖç
                            </button>
                            <button class="btn btn-secondary" id="manualAssignBtn">
                                <span class="btn-icon">‚úã</span>
                                ÊâãÂä®ÂàÜÈÖç
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ÊâãÂä®ÂàÜÈÖçÂºπÁ™ó -->
            <div class="modal" id="manualAssignModal">
                <div class="modal-content modal-large">
                    <div class="modal-header">
                        <h3>ÊâãÂä®ÂàÜÈÖçËßíËâ≤</h3>
                        <button class="modal-close" onclick="closeModal('manualAssignModal')">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="manual-assign-grid" id="manualAssignGrid">
                            <!-- ÊâãÂä®ÂàÜÈÖçË°®Ê†ºÂ∞ÜÁî±JavaScriptÁîüÊàê -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="closeModal('manualAssignModal')">ÂèñÊ∂à</button>
                        <button class="btn btn-primary" id="confirmManualAssign">Á°ÆËÆ§ÂàÜÈÖç</button>
                    </div>
                </div>
            </div>

            <!-- Ê∏∏ÊàèÈù¢Êùø -->
            <section id="gamePanel" class="panel game-panel" style="display: none;">
                <div class="game-layout">
                    <!-- Áé©ÂÆ∂ÂúÜÊ°å -->
                    <div class="table-section">
                        <div class="table-container">
                            <div class="player-circle" id="playerCircle">
                                <!-- Áé©ÂÆ∂Â∫ß‰ΩçÂ∞ÜÁî±JavaScriptÁîüÊàê -->
                            </div>
                            <div class="table-center">
                                <div class="day-night-indicator" id="dayNightIndicator">
                                    <span class="indicator-icon">‚òÄÔ∏è</span>
                                    <span class="indicator-text">Á¨¨ 1 Â§©</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÊéßÂà∂Èù¢Êùø -->
                    <div class="control-section">
                        <!-- Èò∂ÊÆµÊéßÂà∂ -->
                        <div class="control-card">
                            <h3>Èò∂ÊÆµÊéßÂà∂</h3>
                            <div class="phase-controls">
                                <button class="btn btn-night" id="startNightBtn">
                                    <span>üåô</span> ÂºÄÂßãÂ§úÊôö
                                </button>
                                <button class="btn btn-day" id="startDayBtn" disabled>
                                    <span>‚òÄÔ∏è</span> ÂºÄÂßãÁôΩÂ§©
                                </button>
                            </div>
                        </div>

                        <!-- Â§úÈó¥Ë°åÂä®Èù¢Êùø -->
                        <div class="control-card" id="nightPanel" style="display: none;">
                            <h3>Â§úÈó¥Ë°åÂä®È°∫Â∫è</h3>
                            <div class="night-order-list" id="nightOrderList">
                                <!-- Â§úÈó¥Ë°åÂä®È°∫Â∫èÂ∞ÜÁî±JavaScriptÁîüÊàê -->
                            </div>
                        </div>

                        <!-- ÊèêÂêçÊäïÁ•®Èù¢Êùø -->
                        <div class="control-card" id="nominationPanel" style="display: none;">
                            <h3>ÊèêÂêç‰∏éÊäïÁ•®</h3>
                            <div class="nomination-section">
                                <div class="nomination-form">
                                    <select id="nominatorSelect" class="form-select">
                                        <option value="">ÈÄâÊã©ÊèêÂêçËÄÖ</option>
                                    </select>
                                    <span class="nomination-arrow">‚ûú</span>
                                    <select id="nomineeSelect" class="form-select">
                                        <option value="">ÈÄâÊã©Ë¢´ÊèêÂêçËÄÖ</option>
                                    </select>
                                    <button class="btn btn-primary" id="nominateBtn">ÊèêÂêç</button>
                                </div>
                                <div class="nominations-list" id="nominationsList">
                                    <!-- ÊèêÂêçÂàóË°®Â∞ÜÁî±JavaScriptÁîüÊàê -->
                                </div>
                            </div>
                        </div>

                        <!-- Ê∏∏ÊàèÊó•Âøó -->
                        <div class="control-card log-card">
                            <h3>Ê∏∏ÊàèÊó•Âøó</h3>
                            <div class="game-log" id="gameLog">
                                <!-- Êó•ÂøóÂ∞ÜÁî±JavaScriptÁîüÊàê -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Áé©ÂÆ∂ËØ¶ÊÉÖÂºπÁ™ó -->
            <div class="modal" id="playerDetailModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="playerDetailName">Áé©ÂÆ∂ËØ¶ÊÉÖ</h3>
                        <button class="modal-close" onclick="closeModal('playerDetailModal')">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="player-detail-content" id="playerDetailContent">
                            <!-- Áé©ÂÆ∂ËØ¶ÊÉÖÂ∞ÜÁî±JavaScriptÁîüÊàê -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="closeModal('playerDetailModal')">ÂÖ≥Èó≠</button>
                    </div>
                </div>
            </div>

            <!-- ÊäïÁ•®ÂºπÁ™ó -->
            <div class="modal" id="voteModal">
                <div class="modal-content modal-large">
                    <div class="modal-header">
                        <h3 id="voteModalTitle">ÊäïÁ•®</h3>
                        <button class="modal-close" onclick="closeModal('voteModal')">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="vote-info" id="voteInfo">
                            <!-- ÊäïÁ•®‰ø°ÊÅØÂ∞ÜÁî±JavaScriptÁîüÊàê -->
                        </div>
                        <div class="vote-grid" id="voteGrid">
                            <!-- ÊäïÁ•®ÊåâÈíÆÂ∞ÜÁî±JavaScriptÁîüÊàê -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <div class="vote-count" id="voteCount">
                            <span>ËµûÊàêÁ•®: <strong id="yesVotes">0</strong></span>
                            <span>ÈúÄË¶ÅÁ•®Êï∞: <strong id="requiredVotes">0</strong></span>
                        </div>
                        <button class="btn btn-danger" id="executeBtn">ÊâßË°åÂ§ÑÂÜ≥</button>
                        <button class="btn btn-secondary" onclick="closeModal('voteModal')">ÂÖ≥Èó≠</button>
                    </div>
                </div>
            </div>

            <!-- ‰ø°ÊÅØÁîüÊàêÂºπÁ™ó -->
            <div class="modal" id="infoModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>ËßíËâ≤‰ø°ÊÅØ</h3>
                        <button class="modal-close" onclick="closeModal('infoModal')">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="info-content" id="infoContent">
                            <!-- ‰ø°ÊÅØÂÜÖÂÆπÂ∞ÜÁî±JavaScriptÁîüÊàê -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="closeModal('infoModal')">ÂÖ≥Èó≠</button>
                    </div>
                </div>
            </div>

            <!-- Ê∏∏ÊàèÁªìÊùüÂºπÁ™ó -->
            <div class="modal" id="gameEndModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Ê∏∏ÊàèÁªìÊùü</h3>
                    </div>
                    <div class="modal-body">
                        <div class="game-end-content" id="gameEndContent">
                            <!-- Ê∏∏ÊàèÁªìÊùüÂÜÖÂÆπÂ∞ÜÁî±JavaScriptÁîüÊàê -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-primary" onclick="location.reload()">ÂºÄÂßãÊñ∞Ê∏∏Êàè</button>
                    </div>
                </div>
            </div>
        </main>

        <!-- È°µËÑö -->
        <footer class="footer">
            <p>Blood on the Clocktower ËØ¥‰π¶‰∫∫ËæÖÂä©Â∑•ÂÖ∑</p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
    <script src="{{ url_for('static', filename='js/background.js') }}"></script>
</body>
</html>

